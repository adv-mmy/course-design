---
config:
  layout: fixed
---
flowchart TD
    init["初始化数据"] --> app["初始页面"]
    app --> total["登录"] & register["注册"] & unuse["退出程序"]
    register --> rr1["输入个人信息"]
    rr1 --> rr2["更新用户列表"]
    rr2 --> app
    total --> a["用户登录"] & A["管理员登录"]
    A --> B["显示库存状态"] & C["包裹出库记录"] & D["添加新入库包裹"] & E["查看所有包裹"] & back["返回主界面"] & unuse
    E --> EE["选择要查看的类型"]
    B --> F["打印货架信息"]
    EE --> EEE["打印对应包裹信息"]
    C --> G{"遍历待寄包裹"}
    G --> H["选择出库或跳过"]
    H -- 出库 --> I["更新包裹状态和库存"]
    H -- 跳过 --> G
    D --> J["输入包裹信息"]
    J --> K["分配货架并生成取件码"]
    K --> L["更新包裹列表和库存"]
    back --> app & app
    a --> b["查看待取包裹"] & c["寄件"] & d["取消寄件"] & e["查看历史记录"] & m["修改个人信息"] & n["注销账号"] & back & unuse
    e --> ee["选择要查看的类型"]
    ee --> eee["打印对应包裹信息"]
    n -- 确认 --> nn["移除用户，更新用户列表"]
    b --> f{"输入取件码"}
    f -- 正确 --> g["取走包裹，更新包裹状态"]
    f -- 错误 --> b
    c --> h["填写寄件信息"]
    h --> i{"选择是否需要取件上门"}
    i -- 是 --> j["预约取件时间"]
    j --> k["计算运费"]
    i -- 否 --> k
    k --> l["生成单号"]
    d --> dd1["输入单号"]
    dd1 -- 正确 --> ddd1["取消成功"]
    m --> mm1["修改账户名"] & mm2["修改密码"]
    unuse --> shut["保存数据"]
